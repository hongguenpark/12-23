CREATE COLUMN TABLE ZMATERIAL_DEMO (
	"MANDT" NVARCHAR(3) DEFAULT '000' NOT NULL,
	"COLLECT_NO" NVARCHAR(35) DEFAULT '' NOT NULL,
	"DATEPOSTED_STR" NVARCHAR(8) DEFAULT '00000000' NOT NULL,
	"DOC_TYPE" NVARCHAR(4) DEFAULT '' NOT NULL,
	"SALES_ORG" NVARCHAR(4) DEFAULT '' NOT NULL,
	"DISTR_CHAN" NVARCHAR(2) DEFAULT '' NOT NULL,
	"DIVISION" NVARCHAR(2) DEFAULT '' NOT NULL,
	"REQ_DATE_H" NVARCHAR(20) DEFAULT '' NOT NULL,
	"MATERIAL" NVARCHAR(40) DEFAULT '' NOT NULL,
	"QUANTITY" DECIMAL(13, 3) DEFAULT 0 NOT NULL,
	"SOLD_TO" NVARCHAR(10) DEFAULT '' NOT NULL,
	"SHIP_TO" NVARCHAR(10) DEFAULT '' NOT NULL,
	"DATEPOSTED" NVARCHAR(14) DEFAULT '00000000000000' NOT NULL,
	"STATUS" NVARCHAR(1) DEFAULT '' NOT NULL,
	"LASTCHANGEDATE" NVARCHAR(8) DEFAULT '00000000' NOT NULL,
	"LASTCHANGEUSER" NVARCHAR(12) DEFAULT '' NOT NULL,
	"OBJECTID" NVARCHAR(40) DEFAULT '' NOT NULL,
	"DOCSTATUS" NVARCHAR(1) DEFAULT '' NOT NULL,
	CONSTRAINT "ZMATERIAL_DEMO~0" PRIMARY KEY(
		"MANDT",
		"COLLECT_NO",
    "DATEPOSTED_STR"
	)
)
UNLOAD PRIORITY 5 AUTO MERGE;

select * from ZMATERIAL_DEMO;


ALTER TABLE ZMATERIAL_DEMO PARTITION BY RANGE (dateposted_str)  
((PARTITION 00000000 <= VALUES < 20201231 PAGE LOADABLE, PARTITION 20201231 <= VALUES < 20211231 COLUMN LOADABLE, PARTITION OTHERS COLUMN LOADABLE));

ALTER TABLE ZMATERIAL_DEMO
      PARTITION BY RANGE (dateposted_month) 
       (
       	(
		 PARTITION 000000 <= VALUES < 202012 PAGE LOADABLE, 
		 PARTITION 202012 <= VALUES < 202112 , 
		 PARTITION OTHERS 
       	)
      SUBPARTITION BY RANGE (dateposted_day)
        (
		 PARTITION 00 <= VALUES < 11 PAGE LOADABLE, 
		 PARTITION 11 <= VALUES < 21 COLUMN LOADABLE, 
		 PARTITION OTHERS COLUMN LOADABLE
        )
       );


ALTER SYSTEM ALTER CONFIGURATION ('indexserver.ini', 'system') SET ('buffer_cache_cs','max_size') = '1500’ with reconfigure;
ALTER SYSTEM ALTER CONFIGURATION ('indexserver.ini', 'system') SET ('buffer_cache_cs','max_size_rel') = '15' with reconfigure;
* HANA Memory 값이 10,000 MBs 인 경우, 15%에 해당되는 1500 MB 로 버퍼 캐시 최대 사이즈가 제한됨. 

설정값 확인 Command:
SELECT DISTINCT LOAD_UNIT FROM SYS.TABLES WHERE SCHEMA_NAME = '_SYS_STATISTICS' AND IS_COLUMN_TABLE = 'TRUE’  AND IS_USER_DEFINED_TYPE = 'FALSE’;
- 결과값이 Page인 경우(Default), HANA DB 내 통계 데이터는 warm data로 설정되어, 조회하지 않는 경우 메모리를 점유하지 않고 Persistent layer에서 저장하여 보관. ﻿


Hot to Warm 변경 Command: 
CALL _SYS_STATISTICS.SHARED_ALTER_PAGE_LOADABLE;
Warm to Hot 변경 Command:
CALL _SYS_STATISTICS.SHARED_ALTER_DEFAULT_LOADABLE;
